@import "tailwindcss";
@import "tw-animate-css";
@import "@fontsource-variable/jetbrains-mono";

@font-face {
	font-family: "Satoshi";
	src: url("/fonts/satoshi-400.woff2") format("woff2");
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "Satoshi";
	src: url("/fonts/satoshi-500.woff2") format("woff2");
	font-weight: 500;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "Satoshi";
	src: url("/fonts/satoshi-700.woff2") format("woff2");
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "Google Sans";
	src: url("/Google_Sans/GoogleSans-VariableFont_GRAD,opsz,wght.ttf") format("truetype");
	font-weight: 100 900;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "Google Sans";
	src: url("/Google_Sans/GoogleSans-Italic-VariableFont_GRAD,opsz,wght.ttf") format("truetype");
	font-weight: 100 900;
	font-style: italic;
	font-display: swap;
}

@custom-variant dark (&:is(.dark *));

:root {
	--background: oklch(0.99 0.002 106);
	--foreground: oklch(0.25 0.02 300);
	--card: oklch(0.99 0.002 106);
	--card-foreground: oklch(0.25 0.02 300);
	--popover: oklch(0.99 0.002 106);
	--popover-foreground: oklch(0.25 0.02 300);
	--primary: oklch(0.48 0.18 275);
	--primary-foreground: oklch(0.98 0.01 275);
	--secondary: oklch(0.75 0.05 300);
	--secondary-foreground: oklch(0.25 0.02 300);
	--muted: oklch(0.95 0.01 300);
	--muted-foreground: oklch(0.55 0.02 300);
	--accent: oklch(0.57 0.17 320);
	--accent-foreground: oklch(0.98 0.01 320);
	--destructive: oklch(0.57 0.19 25);
	--border: oklch(0.9 0.01 300);
	--input: oklch(0.9 0.01 300);
	--ring: oklch(0.48 0.18 275);
	--chart-1: oklch(0.7 0.12 230);
	--chart-2: oklch(0.57 0.17 320);
	--chart-3: oklch(0.48 0.18 275);
	--chart-4: oklch(0.8 0.14 75);
	--chart-5: oklch(0.57 0.19 25);
	--sidebar: oklch(0.97 0.01 300);
	--sidebar-foreground: oklch(0.25 0.02 300);
	--sidebar-primary: oklch(0.48 0.18 275);
	--sidebar-primary-foreground: oklch(0.98 0.01 275);
	--sidebar-accent: oklch(0.57 0.17 320);
	--sidebar-accent-foreground: oklch(0.98 0.01 320);
	--sidebar-border: oklch(0.9 0.01 300);
	--sidebar-ring: oklch(0.48 0.18 275);
}

.dark {
	--background: oklch(0.22 0.02 300);
	--foreground: oklch(0.95 0.01 300);
	--card: oklch(0.28 0.02 300);
	--card-foreground: oklch(0.95 0.01 300);
	--popover: oklch(0.28 0.02 300);
	--popover-foreground: oklch(0.95 0.01 300);
	--primary: oklch(0.7 0.12 230);
	--primary-foreground: oklch(0.2 0.03 275);
	--secondary: oklch(0.35 0.03 300);
	--secondary-foreground: oklch(0.95 0.01 300);
	--muted: oklch(0.3 0.02 300);
	--muted-foreground: oklch(0.65 0.02 300);
	--accent: oklch(0.67 0.15 320);
	--accent-foreground: oklch(0.2 0.03 320);
	--destructive: oklch(0.65 0.2 25);
	--border: oklch(1 0 0 / 10%);
	--input: oklch(1 0 0 / 15%);
	--ring: oklch(0.7 0.12 230);
	--chart-1: oklch(0.7 0.12 230);
	--chart-2: oklch(0.67 0.15 320);
	--chart-3: oklch(0.55 0.16 275);
	--chart-4: oklch(0.8 0.14 75);
	--chart-5: oklch(0.65 0.2 25);
	--sidebar: oklch(0.28 0.02 300);
	--sidebar-foreground: oklch(0.95 0.01 300);
	--sidebar-primary: oklch(0.7 0.12 230);
	--sidebar-primary-foreground: oklch(0.2 0.03 275);
	--sidebar-accent: oklch(0.67 0.15 320);
	--sidebar-accent-foreground: oklch(0.2 0.03 320);
	--sidebar-border: oklch(1 0 0 / 10%);
	--sidebar-ring: oklch(0.7 0.12 230);
}

@theme inline {
	--font-brand: "Satoshi", Inter, "Google Sans", ui-sans-serif, system-ui, sans-serif;
	--font-sans: var(--font-brand);
	--font-mono: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
	--font-logo: "Google Sans", sans-serif;
	--color-sidebar-ring: var(--sidebar-ring);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar: var(--sidebar);
	--color-chart-5: var(--chart-5);
	--color-chart-4: var(--chart-4);
	--color-chart-3: var(--chart-3);
	--color-chart-2: var(--chart-2);
	--color-chart-1: var(--chart-1);
	--color-ring: var(--ring);
	--color-input: var(--input);
	--color-border: var(--border);
	--color-destructive: var(--destructive);
	--color-accent-foreground: var(--accent-foreground);
	--color-accent: var(--accent);
	--color-muted-foreground: var(--muted-foreground);
	--color-muted: var(--muted);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-secondary: var(--secondary);
	--color-primary-foreground: var(--primary-foreground);
	--color-primary: var(--primary);
	--color-popover-foreground: var(--popover-foreground);
	--color-popover: var(--popover);
	--color-card-foreground: var(--card-foreground);
	--color-card: var(--card);
	--color-foreground: var(--foreground);
	--color-background: var(--background);
}

/* DESIGN RULE: No rounded corners. This override is intentional.
   See CLAUDE.md or ask before removing. */
* {
	border-radius: 0 !important;
}

@layer base {
	* {
		@apply border-border outline-ring/50;
	}
	body {
		@apply font-sans bg-background text-foreground;
		line-height: 1.55;
		background-image:
			radial-gradient(900px 520px at 18% -10%, rgb(11 60 255 / 10%), transparent 62%),
			radial-gradient(900px 520px at 78% -10%, rgb(193 76 255 / 8%), transparent 60%),
			linear-gradient(to right, rgb(0 0 0 / 4%) 1px, transparent 1px),
			linear-gradient(to bottom, rgb(0 0 0 / 4%) 1px, transparent 1px);
		background-size: auto, auto, 64px 64px, 64px 64px;
		background-position: center, center, center, center;
		background-attachment: fixed;
	}
	html {
		@apply font-sans;
		overflow-x: hidden;
	}

	.dark body {
		background-image:
			radial-gradient(900px 520px at 18% -10%, rgb(11 60 255 / 18%), transparent 62%),
			radial-gradient(900px 520px at 78% -10%, rgb(193 76 255 / 12%), transparent 60%),
			linear-gradient(to right, rgb(255 255 255 / 4%) 1px, transparent 1px),
			linear-gradient(to bottom, rgb(255 255 255 / 4%) 1px, transparent 1px);
		background-size: auto, auto, 64px 64px, 64px 64px;
		background-position: center, center, center, center;
		background-attachment: fixed;
	}

	::selection {
		background: color-mix(in oklab, var(--primary) 28%, transparent);
	}

	:focus-visible {
		outline: 2px solid color-mix(in oklab, var(--primary) 70%, white);
		outline-offset: 2px;
	}
}

@layer components {
	:root {
		--spectrum-cobalt: #0b3cff;
		--spectrum-blue: #2e6bff;
		--spectrum-violet: #6b5cff;
		--spectrum-magenta: #c14cff;
		--spectrum-amber: #ff8a3d;
		--spectrum-gold: #ffc76a;
	}

	.brand-text {
		font-family: var(--font-brand);
		letter-spacing: 0.015em;
		font-kerning: normal;
		font-feature-settings: "kern" 1;
		line-height: 1;
		display: inline-block;
		position: relative;
		white-space: nowrap;
		/* Slightly larger than surrounding UI text (requested). */
		font-size: 1.06em;
	}

	.brand-text--ralph {
		font-weight: 500;
		color: transparent;
		background-image: linear-gradient(
			90deg,
			var(--ralph-cobalt, var(--spectrum-cobalt)) 0%,
			var(--ralph-blue, var(--spectrum-blue)) 35%,
			var(--ralph-violet, var(--spectrum-violet)) 60%,
			var(--ralph-magenta, var(--spectrum-magenta)) 80%,
			var(--ralph-amber, var(--spectrum-amber)) 100%
		);
		-webkit-background-clip: text;
		background-clip: text;
		text-shadow:
			0 0 12px rgb(46 107 255 / 14%),
			0 0 18px rgb(193 76 255 / 10%);
	}

	.dark .brand-text--ralph {
		/* Dark mode needs higher minimum contrast on the early gradient stops. */
		--ralph-cobalt: #3d63ff;
		--ralph-blue: #4f83ff;
		--ralph-violet: #8a7cff;
		--ralph-magenta: #d06bff;
		--ralph-amber: #ff9a57;
		text-shadow:
			0 0 16px rgb(46 107 255 / 22%),
			0 0 26px rgb(193 76 255 / 16%);
	}

	.brand-text--acorn {
		font-weight: 500;
		color: transparent;
		background-image: linear-gradient(
			90deg,
			var(--acorn-blue, var(--spectrum-blue)) 0%,
			var(--acorn-violet, var(--spectrum-violet)) 45%,
			var(--acorn-amber, var(--spectrum-amber)) 75%,
			var(--acorn-gold, var(--spectrum-gold)) 100%
		);
		-webkit-background-clip: text;
		background-clip: text;
		text-shadow:
			0 0 9px rgb(255 138 61 / 12%),
			0 0 14px rgb(255 138 61 / 8%);
		filter: saturate(0.9);
	}

	.dark .brand-text--acorn {
		/* Brighten the left side for contrast on dark backgrounds. */
		--acorn-blue: #4f83ff;
		--acorn-violet: #8a7cff;
		--acorn-amber: #ff9a57;
		--acorn-gold: #ffd27e;
		text-shadow:
			0 0 12px rgb(255 138 61 / 18%),
			0 0 18px rgb(255 138 61 / 12%);
		filter: saturate(0.95);
	}

	.brand-text--levitate {
		/* Light mode: neutral flagship mark that still reads on a light background. */
		font-weight: 700; /* Satoshi doesn't ship a true 600. */
		color: transparent;
		background-image: linear-gradient(180deg, #1b2436 0%, #0b1220 100%);
		-webkit-background-clip: text;
		background-clip: text;
		text-shadow: 0 0 10px rgb(46 107 255 / 8%);
	}

	.brand-text--levitate::after {
		content: attr(data-text);
		position: absolute;
		inset: 0;
		pointer-events: none;
		color: transparent;
		background-image: linear-gradient(90deg, var(--spectrum-blue), var(--spectrum-violet));
		-webkit-background-clip: text;
		background-clip: text;
		opacity: 0.12;
	}

	.dark .brand-text--levitate {
		/* Dark mode: near-neutral cool white with faint spectral reflection. */
		background-image: linear-gradient(180deg, #ffffff 0%, #dce6ff 100%);
		text-shadow: 0 0 10px rgb(46 107 255 / 10%);
	}

	.dark .brand-text--levitate::after {
		opacity: 0.14;
	}

	.ui-panel {
		background: color-mix(in oklab, var(--card) 90%, transparent);
		color: var(--card-foreground);
		box-shadow:
			0 0 0 1px color-mix(in oklab, var(--border) 80%, transparent),
			0 12px 40px rgb(0 0 0 / 4%);
	}

	.dark .ui-panel {
		box-shadow:
			0 0 0 1px color-mix(in oklab, var(--border) 90%, transparent),
			0 18px 60px rgb(0 0 0 / 35%);
	}

	.ui-panel-muted {
		background: color-mix(in oklab, var(--muted) 55%, transparent);
	}

	.ui-lift {
		transition:
			transform 180ms ease,
			box-shadow 180ms ease,
			background-color 180ms ease;
	}

	.ui-lift:hover {
		transform: translateY(-1px);
		box-shadow:
			0 0 0 1px color-mix(in oklab, var(--border) 80%, transparent),
			0 16px 54px rgb(0 0 0 / 7%);
	}

	.dark .ui-lift:hover {
		box-shadow:
			0 0 0 1px color-mix(in oklab, var(--border) 95%, transparent),
			0 20px 70px rgb(0 0 0 / 45%);
	}

	.ui-divider {
		height: 1px;
		background: linear-gradient(
			90deg,
			transparent 0%,
			color-mix(in oklab, var(--border) 75%, transparent) 20%,
			color-mix(in oklab, var(--border) 75%, transparent) 80%,
			transparent 100%
		);
	}

	.ui-btn {
		transition:
			transform 160ms ease,
			background-color 160ms ease,
			box-shadow 160ms ease,
			filter 160ms ease;
	}

	.ui-btn:active {
		transform: translateY(1px);
	}

	.ui-btn-primary {
		color: white;
		background-image: linear-gradient(
			90deg,
			var(--spectrum-cobalt) 0%,
			var(--spectrum-violet) 55%,
			var(--spectrum-amber) 110%
		);
		box-shadow:
			0 0 0 1px rgb(0 0 0 / 12%),
			0 10px 30px rgb(11 60 255 / 10%);
	}

	.ui-btn-primary:hover {
		filter: saturate(1.05) brightness(1.02);
		box-shadow:
			0 0 0 1px rgb(0 0 0 / 12%),
			0 14px 46px rgb(11 60 255 / 14%);
	}

	.dark .ui-btn-primary {
		box-shadow:
			0 0 0 1px rgb(255 255 255 / 10%),
			0 14px 54px rgb(11 60 255 / 24%);
	}

	.ui-btn-secondary {
		background: color-mix(in oklab, var(--background) 88%, transparent);
		color: var(--foreground);
		box-shadow: 0 0 0 1px color-mix(in oklab, var(--border) 85%, transparent);
	}

	.ui-btn-secondary:hover {
		background: color-mix(in oklab, var(--muted) 50%, transparent);
	}

	@media (prefers-reduced-motion: reduce) {
		.animate-in {
			animation: none !important;
		}
		.ui-lift,
		.ui-btn {
			transition: none !important;
		}
	}
}

/* Container = half of 16:9 1920px screen */
.container {
	width: 100%;
	max-width: 960px;
	margin-left: auto;
	margin-right: auto;
	padding-left: 1.5rem;
	padding-right: 1.5rem;
}

/* Shiki/Astro Code syntax highlighting - dual theme support */
/* Astro's <Code> component uses .astro-code class, not .shiki */
.shiki,
.astro-code,
.shiki code,
.astro-code code {
	background-color: transparent !important;
}

/* Light mode: use the inline color value from Shiki (no override needed) */

/* Dark mode: use --shiki-dark colors */
.dark .shiki span,
.dark .astro-code span {
	color: var(--shiki-dark) !important;
}

/* Force muted backgrounds in dark mode */
/* This ensures code blocks and inline code have dark backgrounds regardless of Tailwind compilation */
.dark .bg-\[var\(--muted\)\],
.dark .bg-muted,
.dark code.bg-\[var\(--muted\)\],
.dark code.bg-muted {
	background-color: oklch(0.3 0.02 300) !important;
}

/* Custom scrollbars - styled to match theme */
::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: var(--border);
}

::-webkit-scrollbar-thumb:hover {
	background: var(--muted-foreground);
}

/* Firefox scrollbar styling */
* {
	scrollbar-width: thin;
	scrollbar-color: var(--border) transparent;
}

/* Utility class to hide scrollbar while keeping scrollability */
.no-scrollbar {
	-ms-overflow-style: none;
	scrollbar-width: none;
}
.no-scrollbar::-webkit-scrollbar {
	display: none;
}

/* Mobile-friendly code blocks */
pre {
	max-width: 100%;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

/* Ensure code block containers don't overflow on mobile */
.container pre,
.container .astro-code,
.container .shiki {
	max-width: calc(100vw - 3rem);
}

@media (max-width: 768px) {
	.container pre,
	.container .astro-code,
	.container .shiki {
		max-width: calc(100vw - 2rem);
	}

	/* Make code blocks visually indicate scrollability */
	pre {
		position: relative;
	}

	pre::after {
		content: "";
		position: absolute;
		right: 0;
		top: 0;
		bottom: 0;
		width: 24px;
		background: linear-gradient(to right, transparent, var(--muted));
		pointer-events: none;
		opacity: 0.7;
	}

	/* Hide gradient when scrolled to end */
	pre:not(:has(code)) {
		overflow-x: auto;
	}
}
