@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&family=IBM+Plex+Mono:wght@400;500;600&display=swap");
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
	/* Canonical palette extracted from logo system */
	--background: #f2f1ef;
	--foreground: #252426;
	--muted-foreground: #5f5d63;

	--card: #faf8f4;
	--card-foreground: #252426;
	--muted: #e9e5dc;
	--secondary: #e1ddd4;

	--popover: #faf8f4;
	--popover-foreground: #252426;

	--border: #c8c0b3;
	--border-strong: #b3ab9e;
	--input: #c8c0b3;

	--primary: #252426;
	--primary-foreground: #f1e6d3;
	--accent: #6f8f86;
	--accent-foreground: #f4f7f5;
	--destructive: #b9827e;
	--destructive-foreground: #fff7f6;
	--ring: #8c8fa8;

	--chart-1: #6f8f86;
	--chart-2: #8c8fa8;
	--chart-3: #9aa48c;
	--chart-4: #a4869f;
	--chart-5: #b9827e;

	--sidebar: #ece6dc;
	--sidebar-foreground: #252426;
	--sidebar-primary: #252426;
	--sidebar-primary-foreground: #f1e6d3;
	--sidebar-accent: #6f8f86;
	--sidebar-accent-foreground: #f4f7f5;
	--sidebar-border: #c8c0b3;
	--sidebar-ring: #8c8fa8;

	--spectrum-1: #9aa48c;
	--spectrum-2: #b9827e;
	--spectrum-3: #6f8f86;
	--spectrum-4: #8c8fa8;
	--spectrum-5: #a4869f;
	--spectrum-6: #9f6e6a;

	/* Compatibility aliases for legacy spectrum names */
	--spectrum-cobalt: var(--spectrum-5);
	--spectrum-blue: var(--spectrum-4);
	--spectrum-violet: var(--spectrum-5);
	--spectrum-magenta: var(--spectrum-6);
	--spectrum-amber: var(--spectrum-2);
	--spectrum-gold: var(--spectrum-1);

	--space-1: 4px;
	--space-2: 8px;
	--space-3: 12px;
	--space-4: 16px;
	--space-5: 24px;
	--space-6: 32px;
	--space-7: 48px;
	--space-8: 64px;
	--space-9: 96px;

	--dur-micro: 140ms;
	--dur-ui: 200ms;
	--dur-section: 280ms;
	--ease-out: cubic-bezier(0.16, 1, 0.3, 1);
}

.dark {
	--background: #19191d;
	--foreground: #f1e6d3;
	--muted-foreground: #c8bcaa;

	--card: #222228;
	--card-foreground: #f1e6d3;
	--muted: #1f1f25;
	--secondary: #2a2b34;

	--popover: #222228;
	--popover-foreground: #f1e6d3;

	--border: #3e3e49;
	--border-strong: #50505f;
	--input: #3e3e49;

	--primary: #f1e6d3;
	--primary-foreground: #252426;
	--accent: #7e968c;
	--accent-foreground: #f1e6d3;
	--destructive: #b9827e;
	--destructive-foreground: #fff3f2;
	--ring: #a4869f;

	--chart-1: #7e968c;
	--chart-2: #8c8fa8;
	--chart-3: #9aa48c;
	--chart-4: #a4869f;
	--chart-5: #b9827e;

	--sidebar: #17171c;
	--sidebar-foreground: #e8ddca;
	--sidebar-primary: #f1e6d3;
	--sidebar-primary-foreground: #252426;
	--sidebar-accent: #7e968c;
	--sidebar-accent-foreground: #f1e6d3;
	--sidebar-border: #32323b;
	--sidebar-ring: #a4869f;
}

@theme inline {
	--font-brand: "Space Grotesk", "Google Sans", "Avenir Next", ui-sans-serif, system-ui, sans-serif;
	--font-sans: var(--font-brand);
	--font-mono: "IBM Plex Mono", "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
	--font-logo: var(--font-brand);

	--color-sidebar-ring: var(--sidebar-ring);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar: var(--sidebar);
	--color-chart-5: var(--chart-5);
	--color-chart-4: var(--chart-4);
	--color-chart-3: var(--chart-3);
	--color-chart-2: var(--chart-2);
	--color-chart-1: var(--chart-1);
	--color-ring: var(--ring);
	--color-input: var(--input);
	--color-border: var(--border);
	--color-destructive: var(--destructive);
	--color-accent-foreground: var(--accent-foreground);
	--color-accent: var(--accent);
	--color-muted-foreground: var(--muted-foreground);
	--color-muted: var(--muted);
	--color-secondary-foreground: var(--foreground);
	--color-secondary: var(--secondary);
	--color-primary-foreground: var(--primary-foreground);
	--color-primary: var(--primary);
	--color-popover-foreground: var(--popover-foreground);
	--color-popover: var(--popover);
	--color-card-foreground: var(--card-foreground);
	--color-card: var(--card);
	--color-foreground: var(--foreground);
	--color-background: var(--background);
}

@layer base {
	* {
		@apply border-border outline-ring/50;
	}

	html {
		@apply font-sans;
		overflow-x: hidden;
	}

	body {
		@apply font-sans text-foreground;
		position: relative;
		line-height: 1.6;
		background: var(--background);
		letter-spacing: -0.005em;
	}

	body::before,
	body::after {
		content: "";
		position: fixed;
		inset: 0;
		pointer-events: none;
		z-index: 1;
	}

	/* Grain overlay */
	body::before {
		opacity: 0.06;
		background-image:
			radial-gradient(circle at 10% 20%, rgb(255 255 255 / 0.95) 0.45px, transparent 0.55px),
			radial-gradient(circle at 80% 30%, rgb(0 0 0 / 0.95) 0.45px, transparent 0.55px),
			radial-gradient(circle at 40% 70%, rgb(255 255 255 / 0.8) 0.4px, transparent 0.55px);
		background-size: 3px 3px, 4px 4px, 5px 5px;
		mix-blend-mode: soft-light;
	}

	/* Scanline overlay */
	body::after {
		opacity: 0.04;
		background-image: repeating-linear-gradient(
			to bottom,
			rgb(255 255 255 / 0.14) 0px,
			rgb(255 255 255 / 0.14) 1px,
			transparent 1px,
			transparent 3px
		);
	}

	::selection {
		background: color-mix(in srgb, var(--accent) 28%, transparent);
		color: var(--foreground);
	}

	:focus-visible {
		outline: 2px solid color-mix(in srgb, var(--ring) 72%, white 28%);
		outline-offset: 2px;
	}
}

@layer components {
	.site-shell {
		position: relative;
		min-height: 100dvh;
	}

	.site-content {
		position: relative;
		z-index: 2;
	}

	.site-background {
		position: fixed;
		inset: 0;
		z-index: 0;
		pointer-events: none;
		overflow: hidden;
	}

	.site-background__wash {
		position: absolute;
		inset: 0;
		background:
			linear-gradient(
				180deg,
				color-mix(in srgb, var(--background) 94%, var(--secondary) 6%) 0%,
				color-mix(in srgb, var(--background) 97%, var(--muted) 3%) 55%,
				color-mix(in srgb, var(--background) 95%, var(--muted) 5%) 100%
			);
	}

	.site-background__bloom {
		position: absolute;
		pointer-events: none;
		filter: blur(52px);
		opacity: 0.24;
	}

	.site-background__bloom--a {
		inset: -22% auto auto -18%;
		width: 74vw;
		height: 56vh;
		background: radial-gradient(
			ellipse at center,
			color-mix(in srgb, var(--secondary) 44%, var(--accent) 14%),
			transparent 68%
		);
	}

	.site-background__bloom--b {
		inset: auto -16% -24% auto;
		width: 68vw;
		height: 52vh;
		background: radial-gradient(
			ellipse at center,
			color-mix(in srgb, var(--muted) 62%, var(--accent) 10%),
			transparent 70%
		);
	}

	@media (max-width: 768px) {
		.site-background__bloom {
			filter: blur(44px);
			opacity: 0.2;
		}

		.site-background__bloom--a {
			width: 92vw;
			height: 48vh;
			inset: -16% auto auto -28%;
		}

		.site-background__bloom--b {
			width: 88vw;
			height: 46vh;
			inset: auto -24% -18% auto;
		}
	}

	.section-surface {
		position: relative;
		isolation: isolate;
		background: color-mix(in srgb, var(--muted) 25%, transparent);
		border-top: 2px solid var(--border-strong);
		border-bottom: 2px solid var(--border-strong);
	}

	.catalog-label,
	.ui-label {
		font-family: var(--font-mono);
		font-size: 0.72rem;
		font-weight: 600;
		letter-spacing: 0.12em;
		text-transform: uppercase;
		color: var(--muted-foreground);
	}

	.brand-text {
		font-family: var(--font-logo);
		font-kerning: normal;
		font-feature-settings: "kern" 1;
		font-weight: 700;
		letter-spacing: -0.02em;
		line-height: 1;
		display: inline-block;
		white-space: nowrap;
	}

	.brand-text--levitate {
		color: var(--foreground);
	}

	.brand-text--ralph {
		color: color-mix(in srgb, var(--spectrum-4) 72%, var(--foreground) 28%);
	}

	.brand-text--acorn {
		color: color-mix(in srgb, var(--spectrum-1) 72%, var(--foreground) 28%);
	}

	.ui-panel {
		background: var(--card);
		color: var(--card-foreground);
		border: 1px solid var(--border);
		box-shadow: none;
	}

	.ui-panel-muted {
		background: color-mix(in srgb, var(--muted) 80%, transparent);
	}

	.ui-lift {
		transition:
			transform var(--dur-ui) var(--ease-out),
			border-color var(--dur-ui) var(--ease-out),
			background-color var(--dur-ui) var(--ease-out);
	}

	.ui-lift:hover {
		transform: translateY(-1px);
		border-color: var(--border-strong);
	}

	.ui-divider {
		height: 1px;
		background: color-mix(in srgb, var(--border) 92%, transparent);
	}

	.ui-divider-strong {
		height: 2px;
		background: var(--border-strong);
	}

	.ui-btn {
		border-radius: 4px;
		transition:
			background-color var(--dur-micro) var(--ease-out),
			color var(--dur-micro) var(--ease-out),
			border-color var(--dur-micro) var(--ease-out),
			transform var(--dur-micro) var(--ease-out);
	}

	.ui-btn:active {
		transform: translateY(1px);
	}

	.ui-btn-primary {
		background: var(--primary);
		color: var(--primary-foreground);
		border: 2px solid color-mix(in srgb, var(--primary) 75%, var(--border) 25%);
	}

	.ui-btn-primary:hover {
		background: color-mix(in srgb, var(--primary) 88%, var(--accent) 12%);
	}

	.ui-btn-secondary {
		background: transparent;
		color: var(--foreground);
		border: 1px solid color-mix(in srgb, var(--foreground) 50%, transparent);
	}

	.ui-btn-secondary:hover {
		background: color-mix(in srgb, var(--foreground) 8%, transparent);
	}

	.ui-chip {
		display: inline-flex;
		align-items: center;
		height: 1.55rem;
		padding: 0 0.5rem;
		border-radius: 6px;
		font-family: var(--font-mono);
		font-size: 0.62rem;
		font-weight: 600;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		border: 1px solid var(--border);
		color: var(--foreground);
	}

	.ui-chip--available {
		border-color: color-mix(in srgb, var(--spectrum-3) 75%, var(--border) 25%);
	}

	.ui-chip--beta {
		border-color: color-mix(in srgb, var(--spectrum-1) 75%, var(--border) 25%);
	}

	.ui-chip--blocked {
		border-color: color-mix(in srgb, var(--spectrum-6) 75%, var(--border) 25%);
	}

	.ui-field {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		height: 2.5rem;
		border-radius: 4px;
		border: 1px solid var(--border);
		background: color-mix(in srgb, var(--muted) 36%, transparent);
		color: var(--muted-foreground);
	}

	.ui-link {
		color: color-mix(in srgb, var(--accent) 78%, var(--foreground) 22%);
		text-decoration-line: underline;
		text-decoration-thickness: 1px;
		text-underline-offset: 2px;
		transition: color var(--dur-micro) var(--ease-out);
	}

	.ui-link:hover {
		color: var(--foreground);
	}

	.ui-link-subtle {
		color: var(--muted-foreground);
		transition: color var(--dur-micro) var(--ease-out);
	}

	.ui-link-subtle:hover {
		color: var(--foreground);
	}

	.screenshot-plate {
		position: relative;
		background: color-mix(in srgb, var(--muted) 45%, var(--card) 55%);
		border: 1px solid var(--border);
	}

	.screenshot-plate::before {
		content: "";
		position: absolute;
		inset: 0;
		pointer-events: none;
		background: repeating-linear-gradient(
			to bottom,
			rgb(255 255 255 / 0.03) 0px,
			rgb(255 255 255 / 0.03) 1px,
			transparent 1px,
			transparent 3px
		);
	}

	.code-plate {
		background: color-mix(in srgb, var(--muted) 84%, var(--background) 16%);
		border: 1px solid var(--border);
	}

	.code-plate__header {
		border-bottom: 1px solid var(--border);
		font-family: var(--font-mono);
		font-size: 0.68rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
	}

	.code-plate__body {
		position: relative;
	}

	.code-plate__body::after {
		content: "";
		position: absolute;
		inset: 0;
		pointer-events: none;
		opacity: 0.05;
		background-image: repeating-linear-gradient(
			to bottom,
			rgb(255 255 255 / 0.45) 0px,
			rgb(255 255 255 / 0.45) 1px,
			transparent 1px,
			transparent 2px
		);
	}

	.catalog-reveal {
		opacity: 0;
		animation: catalog-fade var(--dur-section) var(--ease-out) forwards;
	}

	@keyframes catalog-fade {
		from {
			opacity: 0;
			transform: translateY(8px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.catalog-reveal,
		.animate-in {
			animation: none !important;
			opacity: 1 !important;
			transform: none !important;
		}

		.ui-lift,
		.ui-btn,
		[data-tab-content],
		.docs-nav-chevron {
			transition: none !important;
		}
	}
}

.container {
	width: 100%;
	max-width: 960px;
	margin-left: auto;
	margin-right: auto;
	padding-left: 1.5rem;
	padding-right: 1.5rem;
}

@media (max-width: 768px) {
	.container {
		padding-left: 1rem;
		padding-right: 1rem;
	}
}

.shiki,
.astro-code,
.shiki code,
.astro-code code {
	background-color: transparent !important;
}

.dark .astro-code-themes span[style*="--shiki-dark"] {
	color: var(--shiki-dark, inherit) !important;
}

.dark .bg-\[var\(--muted\)\],
.dark .bg-muted,
.dark code.bg-\[var\(--muted\)\],
.dark code.bg-muted {
	background-color: color-mix(in srgb, var(--muted) 88%, black 12%) !important;
}

::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: var(--border);
}

::-webkit-scrollbar-thumb:hover {
	background: var(--border-strong);
}

* {
	scrollbar-width: thin;
	scrollbar-color: var(--border) transparent;
}

.no-scrollbar {
	-ms-overflow-style: none;
	scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
	display: none;
}

pre {
	max-width: 100%;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

.container pre,
.container .astro-code,
.container .shiki {
	max-width: calc(100vw - 3rem);
}

@media (max-width: 768px) {
	.container pre,
	.container .astro-code,
	.container .shiki {
		max-width: calc(100vw - 2rem);
	}
}
