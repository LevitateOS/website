---
import BaseLayout from "../layouts/BaseLayout.astro"
import Header from "../components/layout/Header.astro"
import Footer from "../components/layout/Footer.astro"

interface VariantCardProps {
	title: string
	stack: string
	description: string
	features: string[]
	status: "available" | "coming-soon" | "planned"
	downloadUrl?: string
	minRam: string
	recRam: string
	minDisk: string
	recDisk: string
}

const variants: VariantCardProps[] = [
	{
		title: "LevitateOS",
		stack: "systemd + glibc + GNU",
		description: "Traditional Linux stack built on Rocky Linux packages. Maximum compatibility with existing software.",
		features: [
			"systemd service management",
			"glibc for maximum compatibility",
			"GNU coreutils",
			"bash shell",
		],
		status: "coming-soon",
		minRam: "8 GB",
		recRam: "16 GB",
		minDisk: "64 GB",
		recDisk: "256 GB",
	},
	{
		title: "AcornOS",
		stack: "OpenRC + musl + busybox",
		description: "Alternative stack built on Alpine Linux packages. Smaller attack surface, simpler init.",
		features: [
			"OpenRC init system",
			"musl libc",
			"busybox coreutils",
			"ash shell",
		],
		status: "planned",
		minRam: "4 GB",
		recRam: "8 GB",
		minDisk: "32 GB",
		recDisk: "128 GB",
	},
]
---

<BaseLayout title="Download - LevitateOS">
	<div class="flex min-h-screen flex-col">
		<Header />
		<main class="flex-1">
			<div class="container py-12">
				<h1 class="text-3xl font-bold mb-3">Download</h1>
				<p class="text-lg text-muted-foreground mb-8">
					Choose your variant. Both are daily-driver desktops competing with Arch Linux.
				</p>

				<!-- Variant explanation -->
				<div class="bg-muted/50 p-4 mb-8">
					<h2 class="font-semibold mb-3">Two Variants, Same Philosophy</h2>
					<p class="text-sm text-muted-foreground mb-3">
						Both LevitateOS and AcornOS follow Arch's philosophy: minimal base system that you build up yourself.
						The difference is the underlying toolchain.
					</p>
					<div class="grid grid-cols-2 gap-4 text-sm">
						<div>
							<h3 class="font-medium mb-1">LevitateOS</h3>
							<p class="text-xs text-muted-foreground">
								Choose for maximum compatibility. Uses the same stack as Fedora/RHEL.
							</p>
						</div>
						<div>
							<h3 class="font-medium mb-1">AcornOS</h3>
							<p class="text-xs text-muted-foreground">
								Choose for a smaller footprint. Uses the same stack as Alpine Linux.
							</p>
						</div>
					</div>
				</div>

				<!-- Variant cards -->
				<div class="grid grid-cols-2 gap-4 mb-8">
					{variants.map((variant) => (
						<div class="bg-card border p-4 flex flex-col">
							<div class="flex items-center gap-2 mb-2">
								<h3 class="font-semibold">{variant.title}</h3>
							</div>

							<p class="text-xs font-mono text-muted-foreground mb-2">{variant.stack}</p>
							<p class="text-sm text-muted-foreground mb-3">{variant.description}</p>

							<ul class="space-y-0.5 text-xs mb-4">
								{variant.features.map((feature) => (
									<li class="flex items-start gap-1.5">
										<span class="text-primary">+</span>
										<span>{feature}</span>
									</li>
								))}
							</ul>

							<!-- Requirements -->
							<div class="text-xs text-muted-foreground mb-4 border-t pt-3">
								<div class="grid grid-cols-2 gap-2">
									<div>
										<span class="font-medium">Min RAM:</span> {variant.minRam}
									</div>
									<div>
										<span class="font-medium">Rec RAM:</span> {variant.recRam}
									</div>
									<div>
										<span class="font-medium">Min Disk:</span> {variant.minDisk}
									</div>
									<div>
										<span class="font-medium">Rec Disk:</span> {variant.recDisk}
									</div>
								</div>
							</div>

							{variant.status === "available" ? (
								<a
									href={variant.downloadUrl}
									class="inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-3 py-1.5 hover:bg-primary/90 transition-colors text-sm mt-auto"
								>
									<svg class="h-4 w-4" viewBox="0 0 256 256" fill="currentColor">
										<path d="M224 152v56a16 16 0 0 1-16 16H48a16 16 0 0 1-16-16v-56a8 8 0 0 1 16 0v56h160v-56a8 8 0 0 1 16 0Zm-101.66 5.66a8 8 0 0 0 11.32 0l40-40a8 8 0 0 0-11.32-11.32L136 132.69V40a8 8 0 0 0-16 0v92.69l-26.34-26.35a8 8 0 0 0-11.32 11.32Z"/>
									</svg>
									Download ISO
								</a>
							) : variant.status === "coming-soon" ? (
								<span class="inline-flex items-center justify-center gap-2 bg-muted text-muted-foreground px-3 py-1.5 text-sm mt-auto">
									Coming Soon
								</span>
							) : (
								<span class="inline-flex items-center justify-center gap-2 bg-muted text-muted-foreground/60 px-3 py-1.5 text-sm mt-auto">
									Planned
								</span>
							)}
						</div>
					))}
				</div>

				<!-- Guided installation -->
				<div class="bg-card border p-4 mb-8">
					<h2 class="font-semibold mb-2 flex items-center gap-2">
						<svg class="h-4 w-4" viewBox="0 0 256 256" fill="currentColor">
							<path d="M216 40H40a16 16 0 0 0-16 16v144a16 16 0 0 0 16 16h176a16 16 0 0 0 16-16V56a16 16 0 0 0-16-16Zm0 160H40V56h176v144ZM80 96a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16H88a8 8 0 0 1-8-8Zm0 32a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16H88a8 8 0 0 1-8-8Zm0 32a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16H88a8 8 0 0 1-8-8Zm88-64a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16h-24a8 8 0 0 1-8-8Zm0 32a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16h-24a8 8 0 0 1-8-8Zm0 32a8 8 0 0 1 8-8h24a8 8 0 0 1 0 16h-24a8 8 0 0 1-8-8Z"/>
						</svg>
						Guided Installation
					</h2>
					<p class="text-sm text-muted-foreground">
						The live ISO boots into a split-screen tmux session: shell on the left, documentation TUI on the right.
						Follow the installation guide step-by-step while running commands in the adjacent pane.
					</p>
					<div class="mt-2 text-xs text-muted-foreground font-mono">
						Shift+Tab: switch panes | Ctrl+←/→: resize | ↑↓: navigate docs | j/k: scroll
					</div>
				</div>

				<!-- Installation guide link -->
				<div class="bg-card border p-4 mb-8">
					<h2 class="font-semibold mb-2 flex items-center gap-2">
						<svg class="h-4 w-4" viewBox="0 0 256 256" fill="currentColor">
							<path d="M223.68 66.15L135.68 18a15.88 15.88 0 0 0-15.36 0l-88 48.17a16 16 0 0 0-8.32 14v95.64a16 16 0 0 0 8.32 14l88 48.17a15.88 15.88 0 0 0 15.36 0l88-48.17a16 16 0 0 0 8.32-14V80.18a16 16 0 0 0-8.32-14.03ZM128 32l80.35 44L128 120L47.65 76ZM40 90l80 43.78v85.79l-80-43.75Zm96 129.57v-85.75L216 90v85.78Z"/>
						</svg>
						Installation
					</h2>
					<p class="text-sm text-muted-foreground">
						Follow the <a href="/docs/installation" class="text-primary hover:underline">Installation Guide</a> to install LevitateOS manually.
						The process is similar to Arch Linux: partition, extract with recstrap, configure, install bootloader.
					</p>
				</div>

				<!-- Common requirements -->
				<div>
					<h2 class="text-xl font-semibold mb-3">Common Requirements</h2>
					<table class="w-full text-sm">
						<tbody class="text-muted-foreground">
							<tr class="border-b">
								<td class="py-1.5 pr-4 font-medium">Architecture</td>
								<td class="py-1.5">x86_64 (x86-64-v3: Haswell / Zen or newer)</td>
							</tr>
							<tr class="border-b">
								<td class="py-1.5 pr-4 font-medium">Boot</td>
								<td class="py-1.5">UEFI required (Secure Boot must be disabled)</td>
							</tr>
							<tr class="border-b">
								<td class="py-1.5 pr-4 font-medium">CPU</td>
								<td class="py-1.5">AMD Ryzen / Intel Core (2013+) with AVX2</td>
							</tr>
							<tr>
								<td class="py-1.5 pr-4 font-medium">GPU</td>
								<td class="py-1.5">AMD, NVIDIA, or Intel (discrete or integrated)</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</main>
		<Footer />
	</div>
</BaseLayout>
