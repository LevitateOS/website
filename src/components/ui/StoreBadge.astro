---
interface Props {
	label: string
	color: string
	textColor?: string
	status?: string
	iconPath: string
}

const {
	label,
	color,
	textColor = "#ffffff",
	status = "Coming Soon",
	iconPath,
} = Astro.props
---

<span class="store-badge" aria-label={`${label} ${status}`} style={`--store-accent:${color};--store-text:${textColor};`}>
	<span class="store-badge__icon-wrap" aria-hidden="true">
		<span class="store-badge__icon" style={`background: var(--store-text); -webkit-mask-image: url('${iconPath}'); mask-image: url('${iconPath}');`} />
	</span>
	<span class="store-badge__label">{label}</span>
	<span class="store-badge__status">{status}</span>
</span>

<style>
	.store-badge {
		display: inline-grid;
		grid-template-columns: 1.6rem minmax(0, 1fr);
		grid-template-rows: auto auto;
		grid-template-areas:
			"icon label"
			"icon status";
		align-items: center;
		width: 100%;
		padding: 0.45rem 0.5rem;
		border: 1px solid color-mix(in oklab, var(--border) 82%, transparent);
		background: color-mix(in oklab, var(--card) 92%, transparent);
		column-gap: 0.42rem;
		row-gap: 0.22rem;
		position: relative;
		overflow: hidden;
	}

	.store-badge::before {
		content: "";
		position: absolute;
		inset: 0 auto 0 0;
		width: 2px;
		background: color-mix(in oklab, var(--store-accent) 70%, white 30%);
		opacity: 0.9;
	}

	.store-badge__icon-wrap {
		grid-area: icon;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 1.6rem;
		height: 1.6rem;
		aspect-ratio: 1 / 1;
		justify-self: center;
		align-self: center;
	}

	.store-badge__label {
		grid-area: label;
		font-size: 0.84rem;
		font-weight: 700;
		letter-spacing: 0.01em;
		color: var(--card-foreground);
		white-space: normal;
		overflow-wrap: anywhere;
		line-height: 1.15;
		align-self: end;
	}

	.store-badge__icon {
		display: inline-block;
		width: 1.3rem;
		height: 1.3rem;
		-webkit-mask-repeat: no-repeat;
		mask-repeat: no-repeat;
		-webkit-mask-position: center;
		mask-position: center;
		-webkit-mask-size: contain;
		mask-size: contain;
	}

	.store-badge__status {
		grid-area: status;
		display: inline-flex;
		align-items: center;
		font-size: 0.62rem;
		font-weight: 700;
		letter-spacing: 0.06em;
		text-transform: uppercase;
		color: var(--muted-foreground);
		white-space: nowrap;
		align-self: start;
	}
</style>
