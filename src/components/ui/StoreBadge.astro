---
interface Props {
	label: string
	color: string
	textColor?: string
	status?: string
	iconPath: string
}

const {
	label,
	color,
	textColor = "#ffffff",
	status = "Coming Soon",
	iconPath,
} = Astro.props
---

<span class="store-badge" aria-label={`${label} ${status}`} style={`--store-accent:${color};--store-text:${textColor};`}>
	<span class="store-badge__icon-wrap" aria-hidden="true">
		<span class="store-badge__icon" style={`background: var(--store-text); -webkit-mask-image: url('${iconPath}'); mask-image: url('${iconPath}');`} />
	</span>
	<span class="store-badge__label">{label}</span>
	<span class="store-badge__status">{status}</span>
</span>

<style>
	.store-badge {
		display: inline-grid;
		grid-template-columns: 1.5rem minmax(0, 1fr);
		grid-template-rows: auto auto;
		grid-template-areas:
			"icon label"
			"icon status";
		align-items: center;
		width: 100%;
		padding: 0.45rem 0.55rem;
		border: 1px solid var(--border);
		background: var(--card);
		column-gap: 0.45rem;
		row-gap: 0.2rem;
		position: relative;
		overflow: hidden;
	}

	.store-badge::before {
		content: "";
		position: absolute;
		inset: 0 auto 0 0;
		width: 2px;
		background: color-mix(in srgb, var(--store-accent) 70%, var(--foreground) 30%);
	}

	.store-badge__icon-wrap {
		grid-area: icon;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 1.5rem;
		height: 1.5rem;
	}

	.store-badge__icon {
		display: inline-block;
		width: 1.1rem;
		height: 1.1rem;
		-webkit-mask-repeat: no-repeat;
		mask-repeat: no-repeat;
		-webkit-mask-position: center;
		mask-position: center;
		-webkit-mask-size: contain;
		mask-size: contain;
	}

	.store-badge__label {
		grid-area: label;
		font-size: 0.78rem;
		font-weight: 600;
		letter-spacing: -0.01em;
		line-height: 1.15;
		color: var(--card-foreground);
	}

	.store-badge__status {
		grid-area: status;
		font-family: var(--font-mono);
		font-size: 0.6rem;
		font-weight: 600;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		line-height: 1.1;
		color: var(--muted-foreground);
	}
</style>
